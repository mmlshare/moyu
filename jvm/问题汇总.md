# 问题汇总

1. class类对象存放在内存的哪里？

   方法区（Method Area）它用于存储已被虚拟机加载的类信息，常量，静态变量，即时编译器(`JIT`)编译后的代码。

   它和堆一样是各个线程共享的内存区域。

   `JVM`规范把方法区描述为堆的一个逻辑部分, 但是它却有一个别名叫做Non-Heap非堆, 目的应该是与Java Heap 区分开来。

   `JDK1.7`之前，`HotSpot`虚拟机使用永久代(Perm Gen)来实现方法区，在启动时设置`JVM`参数设置大小且不可伸缩。

   `JDK1.7`，将部分永久代种的数据转移到`Java Heap`或者`Native memory`。符号引用转移到`Native memory`，字符串常量从永久代移出放到堆中。

   `JDK1.8`之后，将方法区的实现修改为叫元空间(`Metaspace`)的实现方式

   永久代中的 `class metadata`转移到`Native memory`（本地内存，不是虚拟机内存）。

   永久代中的 `Interned String`和类静态常量 转移到堆中（1.7就已经这么做）。

   

2. 双亲委派机制？为什么？除了安全方面考虑。

   - 防止重复加载，通过双亲委派，每次加载都会向上级查找是否加载过。

   - 避免核心`Class`被篡改，保证Class运行安全。

